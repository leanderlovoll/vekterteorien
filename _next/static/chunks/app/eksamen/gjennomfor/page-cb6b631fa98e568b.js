(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{8022:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(5155),n=s(2115),a=s(8642),l=s(2196),c=s(4269);function o(e,t){let s=new Map(t.map(e=>[e.id,e])),r={};for(let t of e){let e=s.get(t.questionId);e&&(r[e.subjectId]||(r[e.subjectId]={correct:0,total:0}),r[e.subjectId].total++,t.selectedOptionId===e.correctOptionId&&r[e.subjectId].correct++)}return r}var d=s(1483);function i(e){let{timeRemaining:t}=e,s=t<=1800&&t>600,n=t<=600;return(0,r.jsx)("div",{className:(0,c.cn)("fixed top-20 right-4 z-40 px-4 py-2 rounded-lg font-mono text-lg font-bold shadow-lg",n&&"bg-error-500 text-white animate-pulse",s&&!n&&"bg-warning-500 text-white",!s&&!n&&"bg-brand-800 text-white"),children:(0,c.fU)(t)})}var u=s(2619),x=s.n(u);function m(e){let{score:t,correct:s,total:n,timeUsed:a,subjectBreakdown:o,onRetry:d}=e,i=t>=80;return(0,r.jsx)("div",{className:"mx-auto max-w-3xl",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-surface-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:(0,c.cn)("p-8 text-center",i?"bg-success-50":"bg-error-50"),children:[(0,r.jsx)("h1",{className:(0,c.cn)("text-4xl font-bold mb-2",i?"text-success-700":"text-error-700"),children:i?"Du bestod!":"Ikke best\xe5tt"}),(0,r.jsx)("p",{className:(0,c.cn)("text-lg",i?"text-success-600":"text-error-600"),children:i?"Flott innsats! Du har n\xe5dd kravet p\xe5 80 %.":"Du trenger minst 80 % for \xe5 best\xe5. Fortsett \xf8vingen!"})]}),(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-surface-50 rounded-lg",children:[(0,r.jsxs)("div",{className:(0,c.cn)("text-3xl font-bold",i?"text-success-600":"text-error-600"),children:[t,"%"]}),(0,r.jsx)("div",{className:"text-sm text-surface-700",children:"Score"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-surface-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-3xl font-bold text-surface-900",children:[s,"/",n]}),(0,r.jsx)("div",{className:"text-sm text-surface-700",children:"Riktige svar"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-surface-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-surface-900",children:(0,c.fU)(a)}),(0,r.jsx)("div",{className:"text-sm text-surface-700",children:"Tid brukt"})]})]}),(0,r.jsx)("h3",{className:"font-semibold text-surface-900 mb-4",children:"Resultat per emne"}),(0,r.jsx)("div",{className:"space-y-2 mb-8",children:l.y.map(e=>{let t=o[e.id];if(!t)return null;let s=Math.round(t.correct/t.total*100);return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm text-surface-700 w-48 truncate",title:e.name,children:e.shortName}),(0,r.jsx)("div",{className:"flex-1 h-4 bg-surface-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:(0,c.cn)("h-full rounded-full transition-all duration-500",s>=80?"bg-success-500":s>=60?"bg-warning-500":"bg-error-500"),style:{width:"".concat(s,"%")}})}),(0,r.jsxs)("span",{className:(0,c.cn)("text-sm font-medium w-16 text-right",s>=80?"text-success-700":s>=60?"text-warning-600":"text-error-700"),children:[t.correct,"/",t.total]})]},e.id)})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,r.jsx)("button",{onClick:d,className:"px-6 py-3 bg-brand-600 text-white font-medium rounded-lg hover:bg-brand-700 transition-colors",children:"Ta eksamen p\xe5 nytt"}),(0,r.jsx)(x(),{href:"/ovelse",className:"px-6 py-3 border border-surface-300 text-surface-700 font-medium rounded-lg hover:bg-surface-100 transition-colors text-center",children:"\xd8v per emne"}),(0,r.jsx)(x(),{href:"/statistikk",className:"px-6 py-3 border border-surface-300 text-surface-700 font-medium rounded-lg hover:bg-surface-100 transition-colors text-center",children:"Se statistikk"})]})]})]})})}var h=s(9955);function f(){let{addExamResult:e,addWrongAnswer:t}=(0,h.p)(),[s,u]=(0,n.useState)(!1),[x,f]=(0,n.useState)(0),[b,g]=(0,n.useState)({}),[p,v]=(0,n.useState)(!1),[j]=(0,n.useState)(Date.now()),N=(0,n.useMemo)(()=>(function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,r=t.reduce((e,t)=>e+t.hours,0),n=[],a=t.map(e=>{let t=Math.max(2,Math.round(s*(e.hours/r)));return{subjectId:e.id,count:t}}),l=a.reduce((e,t)=>e+t.count,0);for(;l>s;){let e=a.reduce((e,t)=>t.count>e.count?t:e);e.count--,l--}for(;l<s;){let e=a.reduce((e,t)=>t.count>e.count?t:e);e.count++,l++}for(let{subjectId:t,count:s}of a){let r=(0,c.R3)(e[t]||[]);n.push(...r.slice(0,s))}return(0,c.R3)(n)})(a.Zq,l.y,80),[]),{timeRemaining:w,start:k}=function(e,t){let[s,r]=(0,n.useState)(14400),[a,l]=(0,n.useState)(!1),c=(0,n.useRef)(null),o=(0,n.useRef)(t);o.current=t,(0,n.useEffect)(()=>(a&&s>0&&(c.current=setInterval(()=>{r(e=>e<=1?(l(!1),o.current(),0):e-1)},1e3)),()=>{c.current&&clearInterval(c.current)}),[a,s]);let d=(0,n.useCallback)(()=>l(!0),[]);return{timeRemaining:s,isRunning:a,start:d,pause:(0,n.useCallback)(()=>l(!1),[]),reset:(0,n.useCallback)(()=>{l(!1),r(14400)},[e])}}(14400,(0,n.useCallback)(()=>{y()},[])),y=(0,n.useCallback)(()=>{let s=Math.round((Date.now()-j)/1e3),r=(0,a.cB)(),n=o(N.map((e,t)=>({questionId:e.id,selectedOptionId:b[t]})),r),l=0;for(let e=0;e<N.length;e++)b[e]===N[e].correctOptionId&&l++;e(l,N.length,s,n);for(let e=0;e<N.length;e++)b[e]!==N[e].correctOptionId&&t(N[e].id);v(!0)},[N,b,j,e,t]),I=(0,n.useCallback)(()=>{u(!0),k()},[k]);if((0,n.useEffect)(()=>{if(s&&!p){let e=e=>{e.preventDefault()};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}},[s,p]),!s)return(0,r.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-12 text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-surface-900 mb-4",children:"Klar for eksamen?"}),(0,r.jsxs)("p",{className:"text-surface-700 mb-2",children:["Du vil f\xe5 ",N.length," sp\xf8rsm\xe5l og ",4," timer."]}),(0,r.jsx)("p",{className:"text-surface-700 mb-8",children:"Timeren starter n\xe5r du trykker knappen under."}),(0,r.jsx)("button",{onClick:I,className:"px-8 py-4 bg-brand-600 text-white font-semibold rounded-lg hover:bg-brand-700 transition-colors text-lg",children:"Start eksamen n\xe5"})]});if(p){let e=0;for(let t=0;t<N.length;t++)b[t]===N[t].correctOptionId&&e++;let t=Math.round(e/N.length*100),s=Math.round((Date.now()-j)/1e3),n=o(N.map((e,t)=>({questionId:e.id,selectedOptionId:b[t]})),(0,a.cB)());return(0,r.jsx)("div",{className:"px-4 py-8",children:(0,r.jsx)(m,{score:t,correct:e,total:N.length,timeUsed:s,subjectBreakdown:n,onRetry:()=>window.location.reload()})})}let C=N[x],O=Object.keys(b).length;return(0,r.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-8",children:[(0,r.jsx)(i,{timeRemaining:w}),(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-surface-700",children:["Besvart: ",O," av ",N.length]}),(0,r.jsx)("button",{onClick:y,className:"px-4 py-2 text-sm font-medium bg-error-500 text-white rounded-lg hover:bg-error-600 transition-colors",children:"Lever eksamen"})]}),(0,r.jsx)("div",{className:"mb-6 bg-white rounded-xl shadow-sm border border-surface-200 p-4",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:N.map((e,t)=>(0,r.jsx)("button",{onClick:()=>f(t),className:(0,c.cn)("w-9 h-9 rounded-lg text-xs font-medium transition-colors",t===x&&"ring-2 ring-brand-500",void 0!==b[t]?"bg-brand-500 text-white":"bg-surface-100 text-surface-700 hover:bg-surface-200"),children:t+1},t))})}),(0,r.jsx)(d.x,{question:C,mode:"exam",questionNumber:x+1,totalQuestions:N.length,selectedOptionId:b[x],showResult:!1,onSelectOption:e=>{g(t=>({...t,[x]:e}))},onNext:()=>{x<N.length-1?f(e=>e+1):y()},onPrevious:x>0?()=>f(e=>e-1):void 0})]})}},8509:(e,t,s)=>{Promise.resolve().then(s.bind(s,8022))}},e=>{e.O(0,[619,655,441,255,358],()=>e(e.s=8509)),_N_E=e.O()}]);